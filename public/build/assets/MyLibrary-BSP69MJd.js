import{q as E,r,j as e,B as L,W as o}from"./app-DWT7hB3X.js";import{A as T}from"./AuthenticatedLayout-oP7-p8OQ.js";import"./sweetalert2.esm.all-ePrzfkxH.js";/* empty css                        */import{C as J}from"./circle-plus-CD_0DYvf.js";import{C as P}from"./code-vC2yoahx.js";import{F as N}from"./file-text-dwy3FULc.js";import{C as v}from"./clock-DY8zjvnn.js";import{S as w}from"./star-vYAc1Gfp.js";import{c as _}from"./createLucideIcon-Dpa32nA7.js";import{E as $}from"./eye-BZ9IrxpC.js";import{C as D}from"./circle-play-CHd-vt5Y.js";import"./transition-D2D_kb1X.js";import"./render-DRiD-TBL.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],F=_("info",A);function te(){const{auth:Q}=E().props;Q.user;const[l,C]=r.useState([]),[g,c]=r.useState([]),[i,m]=r.useState("published"),[x,f]=r.useState(!0),[h,u]=r.useState(!0),[n,j]=r.useState(null),[d,b]=r.useState(null),[q,B]=r.useState("");r.useEffect(()=>{(async()=>{f(!0),j(null);try{const t=await fetch("/quizzes/my");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();C(a)}catch(t){console.error("Failed to fetch quizzes created by user:",t),j("Failed to load your quizzes. Please try again.")}finally{f(!1)}})()},[]),r.useEffect(()=>{(async()=>{u(!0),b(null);try{const t=await fetch("/quizzes/myj");if(!t.ok){if(t.status>=500)throw new Error(`Server error: ${t.status}`);if(t.status===404||t.status===401){c([]),u(!1);return}throw new Error(`HTTP error! status: ${t.status}`)}const a=await t.json();c(Array.isArray(a)?a:[])}catch(t){console.error("Failed to fetch joined quizzes:",t),t.message&&!t.message.includes("404")&&!t.message.includes("401")?b("Failed to load joined quizzes. Please try again."):c([])}finally{u(!1)}})()},[]);const y=l.filter(s=>i==="published"?s.status==="published":i==="drafts"?s.status==="draft":i==="archive"?s.status==="archived":!1),k=l.filter(s=>s.status==="published").length,S=l.filter(s=>s.status==="draft").length,M=l.filter(s=>s.status==="archived").length,z=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(T,{children:[e.jsx(L,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-8",children:"My Library"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Created by me"}),e.jsx("hr",{className:"border-black mb-4"}),e.jsxs(o,{href:"/createquiz",className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-900 focus:outline-none focus:border-red-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150 mb-4",children:[e.jsx(J,{size:18,className:"mr-2"})," Create New Quiz"]}),x&&e.jsx("p",{className:"text-gray-600",children:"Loading your quizzes..."}),n&&e.jsx("p",{className:"text-red-500",children:n}),!x&&!n&&y.length===0&&e.jsx("p",{className:"text-gray-500",children:"No quizzes found in this category."}),e.jsx("div",{className:"space-y-4",children:!x&&!n&&y.map(s=>{var t;return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 flex items-start gap-4 shadow-sm",children:[e.jsx("img",{src:(t=s.questions[0])!=null&&t.image_path?`/storage/${s.questions[0].image_path}`:"https://placehold.co/96x96/e0e0e0/333333?text=Quiz",alt:"Quiz Thumbnail",className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-600 text-lg font-semibold",children:s.title}),s.code&&e.jsxs("p",{className:"text-sm text-gray-700 mt-1 flex items-center gap-2 font-medium",children:[e.jsx(P,{size:16})," Quiz Code: ",s.code]}),e.jsxs("p",{className:"text-sm text-gray-700 mt-1 flex items-center gap-2",children:[e.jsx(N,{size:16})," ",s.questions.length," Questions"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(v,{size:16})," Created: ",z(s.created_at)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(w,{size:16})," Total Points: ",s.questions.reduce((a,p)=>a+(p.points||0),0)]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsxs(o,{href:route("quizzes.show",s.id),className:"text-blue-600 hover:underline text-sm flex items-center",children:[e.jsx(F,{size:16,className:"mr-1"})," Details"]}),e.jsxs(o,{href:route("quizzes.edit",s.id),className:"text-green-600 hover:underline text-sm flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4Z"})]}),"Edit"]}),s.status==="published"&&e.jsxs(o,{href:route("quizzes.live_session",s.id),className:"text-purple-600 hover:underline text-sm flex items-center",children:[e.jsx($,{size:16,className:"mr-1"})," View Live Session"]})]})]})]},s.id)})})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Quiz Status"}),e.jsxs("div",{className:"flex justify-between text-sm font-semibold mb-2 border-b pb-2",children:[e.jsxs("button",{onClick:()=>m("published"),className:`px-3 py-1 rounded-md transition-colors ${i==="published"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:["Published (",k,")"]}),e.jsxs("button",{onClick:()=>m("drafts"),className:`px-3 py-1 rounded-md transition-colors ${i==="drafts"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:["Drafts (",S,")"]}),e.jsxs("button",{onClick:()=>m("archive"),className:`px-3 py-1 rounded-md transition-colors ${i==="archive"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:["Archive (",M,")"]})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-4",children:'Quizzes filtered by status are shown in the "Created by me" section. Click on a tab to see quizzes of that status.'})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Joined Quizzes"}),e.jsx("hr",{className:"border-black mb-4"}),h&&e.jsx("p",{className:"text-gray-600",children:"Loading joined quizzes..."}),d&&e.jsx("p",{className:"text-red-500",children:d}),!h&&!d&&g.length===0&&e.jsx("p",{className:"text-gray-500",children:"No joined quizzes to display yet."}),e.jsx("div",{className:"space-y-4",children:!h&&!d&&g.map(s=>{var t;return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 flex items-start gap-4 shadow-sm",children:[e.jsx("img",{src:(t=s.questions[0])!=null&&t.image_path?`/storage/${s.questions[0].image_path}`:"https://placehold.co/96x96/e0e0e0/333333?text=Quiz",alt:"Quiz Thumbnail",className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-600 text-lg font-semibold",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-700 mt-1 flex items-center gap-2",children:[e.jsx(N,{size:16})," ",s.questions.length," Questions"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(v,{size:16})," Created: ",z(s.created_at)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(w,{size:16})," Total Points: ",s.questions.reduce((a,p)=>a+(p.points||0),0)]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsxs(o,{href:route("quizzes.starting",s.id),className:"text-blue-600 hover:underline text-sm flex items-center",children:[e.jsx(D,{size:16,className:"mr-1"})," Start"]})})})]})]},s.id)})})]})]})]})]})})})]})}export{te as default};
