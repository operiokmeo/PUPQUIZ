import{q as L,P as V,r as i,j as e,B as J,b as p}from"./app-DfPUS0g-.js";import{B as l}from"./button-DbBkCaNi.js";import{D as E,a as M,b as $,c as z,d as B,e as P,f as F}from"./dialog-CTWfOIJd.js";import{L as m,I as g}from"./label-DmvPTexY.js";import{A as K}from"./AuthenticatedLayout-DP1sGqdd.js";import{S as U}from"./sweetalert2.esm.all-ePrzfkxH.js";/* empty css                        */import{C as X}from"./calendar-Dnwp_kV1.js";import{L as Z}from"./layout-dashboard-CJdz84ez.js";import{P as ee}from"./plus-BCJSyhGj.js";import"./index-33bLDdrw.js";import"./clsx-B-dksMZM.js";import"./utils-CP3_-lCt.js";import"./index-D64yv8nG.js";import"./index-DrLbuDI8.js";import"./x-B5Ef5myS.js";import"./createLucideIcon-BW7jgRi7.js";import"./transition-CdeAVsF6.js";import"./render-TPd2KTBo.js";import"./chevron-right-p5ycHldi.js";import"./chevron-down--lttUmvU.js";function ye(){const{subjects:te}=L().props,{lobbies:h,id:f}=L().props,I=f,{data:j,setData:v,post:H,processing:N,errors:c,reset:q,transform:A}=V({name:"",id:I||"",date:""}),[d,w]=i.useState(new Date),[b,y]=i.useState("12:00"),[O,D]=i.useState(!1),[Y,S]=i.useState(!1),[_,x]=i.useState(!1),[C,Q]=i.useState(new Date);i.useEffect(()=>{const s=setInterval(()=>Q(new Date),1e3);return()=>clearInterval(s)},[]);const k=s=>{if(!s)return"No schedule set";let a;if(s instanceof Date)a=s;else{const t=s.includes("T")?s:s.replace(" ","T");a=new Date(t)}return isNaN(a.getTime())?"Invalid date":a.toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})},W=(s,a,t)=>{if(!a){U.fire({toast:!0,position:"top-end",icon:"info",title:"This quiz room will open soon.",text:t?`Scheduled start: ${k(t)}`:"Please check back shortly.",showConfirmButton:!1,timer:3500,timerProgressBar:!0});return}p.get(`/lobby/${f}/${s}`)};A(s=>{if(_||!d)return{...s,date:""};const a=d instanceof Date?new Date(d.getTime()):new Date(d),[t,o]=b.split(":"),r=new Date(a);r.setHours(parseInt(t,10)),r.setMinutes(parseInt(o,10)),r.setSeconds(0);const n=R=>R.toString().padStart(2,"0"),u=`${r.getFullYear()}-${n(r.getMonth()+1)}-${n(r.getDate())} ${n(r.getHours())}:${n(r.getMinutes())}:${n(r.getSeconds())}`;return{...s,date:u}});const T=s=>{s.preventDefault(),H(route("subject.store"),{onSuccess:()=>{q(),w(new Date),y("12:00"),x(!1),D(!1),S(!1)},onError:a=>{console.log("erroror",a)}})},G=s=>{p.get(`/subjectQuestionForm/${s}`)};return e.jsxs(K,{children:[e.jsx(J,{title:"Event Rooms Category"}),e.jsxs("div",{className:"p-6 bg-white min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-red-800 tracking-tight",children:"All Lobbies with Code"}),e.jsxs("div",{onClick:()=>p.get("/organizerLobby"),className:"bg-red-500 text-white p-4 flex gap-x-3 rounded-md hover:bg-red-700 hover:cursor-pointer cursor-pointer transition-colors",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("p",{children:"Go to Dashboard"})]})]}),h==null?void 0:h.map(s=>{var a;return e.jsxs("div",{className:"mb-8 bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg transition duration-300 hover:shadow-xl",children:[e.jsxs("h2",{className:"text-2xl uppercase font-semibold text-red-700 mb-4 flex items-center gap-2",children:[s.name,e.jsxs("span",{className:"text-2xl font-normal bg-red-100 px-3 py-1 rounded-full text-red-600",children:[e.jsx("b",{children:"Code: "}),s.lobby_code]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 gap-x-10 mt-5",children:s.subjects.map(t=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 overflow-hidden group hover:scale-[1.02]",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-4",children:e.jsx("p",{className:"text-white font-medium text-lg",children:t.subject_name})}),e.jsxs("div",{className:"p-4  flex gap-x-2",children:[(()=>{const o=t.start_date??t.startDate??null;let r=null;if(o){const u=o.includes("T")?o:o.replace(" ","T");r=new Date(u),isNaN(r.getTime())&&(r=null)}const n=!r||r.getTime()-1e3<=C.getTime();return e.jsx("button",{type:"button",onClick:()=>W(t.id,n,o),className:`w-full text-center py-2 rounded-lg transition-all duration-300 shadow-sm group-hover:scale-[1.02] ${n?"bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:n?"Proceed to Quiz":"Not Yet Started"})})(),e.jsx(l,{onClick:()=>G(t.id),className:"w-full border-2 border-red-500 bg-transparent  text-red-600 py-2 rounded-lg hover:bg-red-600 hover:text-white transition-all duration-300 group-hover:scale-[1.02]",children:"Manage Questions"})]}),e.jsxs("div",{className:"px-4 pb-4 text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Start:"})," ",k(t.start_date??t.startDate)]}),(()=>{const o=t.start_date??t.startDate??null;if(o){const r=o.includes("T")?o:o.replace(" ","T"),n=new Date(r);if(!isNaN(n.getTime())&&n.getTime()>C.getTime())return e.jsx("p",{className:"text-amber-600 font-medium",children:"Participants can join once the scheduled time arrives."})}return null})()]})]},t.id))}),((a=s==null?void 0:s.subjects)==null?void 0:a.length)>0?e.jsx("div",{className:"flex justify-end",children:e.jsxs(E,{open:O,onOpenChange:t=>{D(t),x(!1)},children:[e.jsx(M,{asChild:!0,children:e.jsxs(l,{className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-xl px-6 py-2 shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Add Category"]})}),e.jsxs($,{className:"sm:max-w-[425px] w-[700px] bg-white",children:[e.jsxs(z,{children:[e.jsx(B,{className:"text-2xl font-semibold text-red-700",children:"Add New Subject"}),e.jsx(P,{className:"text-red-600/80",children:"Enter the name for your new subject category."})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",className:"text-sm font-medium text-red-700",children:"Subject Name"}),e.jsx(g,{id:"name",placeholder:"Enter subject name",className:"border-red-200 focus:border-red-500 focus:ring-red-500",value:j.name,onChange:t=>v("name",t.target.value),required:!0}),c.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.name})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-red-700",children:" Select Start Date"}),e.jsx(X,{mode:"single",selected:d,onSelect:w,className:"rounded-md border shadow-sm text-lg w-full",captionLayout:"dropdown"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"time",className:"text-sm font-medium text-red-700",children:"Select Start Time"}),e.jsx(g,{id:"time",type:"time",className:"border-red-200 focus:border-red-500 focus:ring-red-500",value:b,onChange:t=>y(t.target.value),required:!0})]})]}),e.jsx(F,{className:"mt-6",children:e.jsx(l,{type:"submit",className:"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-xl px-6 py-2 shadow-md hover:shadow-lg transition-all duration-300",children:N?"Creating...":"Create Subject"})})]})]})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[e.jsx("div",{className:"mb-8",children:e.jsx("svg",{className:"w-32 h-32 mx-auto text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("h3",{className:"text-2xl font-bold text-red-800 mb-4",children:"No Subjects Yet"}),e.jsx("p",{className:"text-red-600 mb-8 max-w-md leading-relaxed",children:"You haven't created any subjects yet. Get started by creating your first subject where participants can join and engage with your quiz."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{open:Y,onOpenChange:t=>{S(t),x(t)},children:[e.jsx(M,{asChild:!0,children:e.jsxs(l,{className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-xl px-8 py-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02]",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Your First Subject"]})}),e.jsxs($,{className:"sm:max-w-[425px] bg-white",children:[e.jsxs(z,{children:[e.jsx(B,{className:"text-2xl font-semibold text-red-700",children:"Add New Subject"}),e.jsx(P,{className:"text-red-600/80",children:"Enter the name for your new subject category."})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",className:"text-sm font-medium text-red-700",children:"Subject Name"}),e.jsx(g,{id:"name",placeholder:"Enter subject name",className:"border-red-200 focus:border-red-500 focus:ring-red-500",value:j.name,onChange:t=>v("name",t.target.value),required:!0}),c.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.name})]}),e.jsx(F,{className:"mt-6",children:e.jsx(l,{type:"submit",className:"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-xl px-6 py-2 shadow-md hover:shadow-lg transition-all duration-300",children:N?"Creating...":"Create Subject"})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-6 pt-4 text-sm text-red-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Quick Setup"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),"Easy Management"]})]})]})]})]},s.id)})]})]})}export{ye as default};
