import{q as O,r as p,j as e,b as U}from"./app-DWT7hB3X.js";import{A as V}from"./AuthenticatedLayout-oP7-p8OQ.js";import{S as f}from"./sweetalert2.esm.all-ePrzfkxH.js";import{B as H}from"./button-PrPonQ1A.js";import{L as M}from"./layout-dashboard-C4hQctlr.js";import{C as J,a as Q}from"./chevron-right-DHPVy0mk.js";import{S as w}from"./search-C5itFlP0.js";import{B as G,H as K}from"./hash-CuEfOkRB.js";import{c as W}from"./createLucideIcon-Dpa32nA7.js";import{F as X}from"./funnel-BpF6GJjj.js";import{U as Y}from"./user-CL-HRr1h.js";import{C as Z}from"./clock-DY8zjvnn.js";import{E as ee}from"./eye-BZ9IrxpC.js";import"./transition-D2D_kb1X.js";import"./render-DRiD-TBL.js";import"./index-BzJmLPLp.js";import"./clsx-B-dksMZM.js";import"./utils-CP3_-lCt.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],re=W("user-round-check",te),Ce=ae=>{var k;const F=O(),{logs:E,lobbies:h,auth:se,personFiles:le}=F.props,[y,R]=p.useState(""),[u,T]=p.useState("all"),[d,j]=p.useState(null),[N,q]=p.useState(""),[v,C]=p.useState(!1),[S,D]=p.useState([]);p.useEffect(()=>{h&&h.length>0&&(D(h),!d&&h[0]&&j(h[0].id))},[h]);const $=S.filter(t=>t.name.toLowerCase().includes(N.toLowerCase())),L=E,I=t=>t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Active Session",i=L.filter(t=>{var c,s,m,x;if(d&&t.lobby_id!==d)return!1;const a=((s=(c=t.participant)==null?void 0:c.team)==null?void 0:s.trim().toLowerCase().includes(y.trim().toLowerCase()))||((x=(m=t.participant)==null?void 0:m.team_leader)==null?void 0:x.trim().toLowerCase().includes(y.trim().toLowerCase()));return u==="all"?a:u==="active"?a&&t.status===2:u==="ended"?a&&t.status===1:a}),z=(t,a)=>{if(!a||a.length===0){f.fire({icon:"info",title:"No Files",text:"No files available to view",confirmButtonColor:"#16a34a"});return}const c=a.reduce((l,n)=>{var o;const r=(o=n.name)==null?void 0:o.match(/\((.*?)\)/),g=r?r[1]:"Unknown";return l[g]||(l[g]=[]),l[g].push(n),l},{}),s=t.participant,m=`
            <div class="mb-6 p-4 border rounded-lg bg-gray-50">
                <h2 class="text-2xl font-bold text-orange-600 mb-4">Team Leader Information</h2>

                <p><strong>Full Name:</strong> ${s.team_leader}</p>
                <p><strong>Student ID:</strong> ${s.student_number||"N/A"}</p>
                <p><strong>Section:</strong> ${s.course_year||"N/A"}</p>
                <p><strong>Email:</strong> ${s.team_leader_email}</p>
                <p><strong>Contact Number:</strong> ${s.contact_number}</p>
            </div>
        `,x=Object.entries(c).map(([l,n])=>`
                    <div class="mb-6 p-4 border rounded-lg bg-gray-50">
                        <h3 class="text-xl font-bold text-orange-600 mb-4">Submitted Requirements</h3>
                        <div class="flex flex-wrap -m-2">
                            ${n.map(g=>{var A;const o=g.url||"",b=(g.name||"Untitled").replace(/\s*\(.*?\)\s*/,""),_=(A=o.split(".").pop())==null?void 0:A.toLowerCase(),B=_==="pdf",P=["jpg","jpeg","png","gif","webp","svg"].includes(_);return B?`
                                <div class="w-1/3 p-2 text-center">
                                    <h4 class="font-semibold text-gray-700 mb-2">${b}</h4>
                                    <iframe 
                                        src="${o}"
                                        width="100%"
                                        height="300px"
                                        style="border:1px solid #ddd; border-radius:8px;"
                                    ></iframe>
                                    <a href="${o}" target="_blank" class="inline-block mt-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">
                                        Open in New Tab
                                    </a>
                                </div>
                            `:P?`
                                <div class="w-1/3 p-2 text-center">
                                    <h4 class="font-semibold text-gray-700 mb-2">${b}</h4>
                                    <img 
                                        src="${o}" 
                                        alt="${b}" 
                                        style="max-width:100%; height:auto; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1);"
                                    />
                                    <a href="${o}" target="_blank" class="inline-block mt-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">
                                        View Full Size
                                    </a>
                                </div>
                            `:`
                            <div class="w-1/3 p-2 text-center">
                                <h4 class="font-semibold text-gray-700 mb-2">${b}</h4>
                                <p class="text-gray-600 mb-2">File type not supported for preview</p>
                                <a href="${o}" target="_blank" class="inline-block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">
                                    Download File
                                </a>
                            </div>
                        `}).join("")}
                        </div>
                    </div>
                `).join("");f.fire({title:`
                <span class="text-4xl font-bold text-gray-900 mb-2 bg-gradient-to-r from-red-600 to-amber-600 bg-clip-text text-transparent">
                    Participant Information
                </span>
            `,html:`
                <div style="max-height:600px; overflow-y:auto; text-align:left;">
                    ${m}
                    ${x}
                </div>
            `,width:"80%",showCloseButton:!0,showConfirmButton:!1,customClass:{popup:"swal-wide",htmlContainer:"swal-html-container"},didOpen:()=>{f.getPopup().querySelectorAll("iframe").forEach(n=>{n.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups")})}})};return e.jsx(V,{children:e.jsx("div",{className:"min-h-screen bg-white p-6",children:e.jsxs("div",{className:"w-full max-w-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 bg-gradient-to-r from-red-600 to-amber-600 bg-clip-text text-transparent",children:"Pre Registration Logs"}),e.jsx("p",{className:"text-gray-600",children:"Monitor and track Pre Registration activity"})]}),e.jsxs("div",{onClick:()=>U.get("/organizerLobby"),className:"bg-red-500 text-white p-4 flex gap-x-3 rounded-md hover:bg-red-700 hover:cursor-pointer",children:[e.jsx(M,{}),e.jsx("p",{children:"Go to Dashboard"})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:`${v?"w-0":"w-80"} flex-shrink-0 transition-all duration-300 overflow-hidden`,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration -300 p-6 hover:shadow-2xl hover:scale-[1.02] hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Quiz Event"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select a quiz event to filter logs"})]}),e.jsx("button",{onClick:()=>C(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",type:"button",title:"Collapse sidebar",children:e.jsx(J,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",placeholder:"Search quiz event...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-0 focus:ring-orange-400 focus:border-orange-400",value:N,onChange:t=>q(t.target.value)}),e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"})]}),e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[e.jsx("button",{onClick:()=>j(null),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${d===null?"bg-orange-500 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-900"}`,type:"button",children:"All Event Quiz Sessions"}),$.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No quiz events found"}):$.map(t=>e.jsx("button",{onClick:()=>j(t.id),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${d===t.id?"bg-orange-500 text-white":"bg-gray-50 hover:bg-gray-100 text-gray-900"}`,type:"button",children:t.name},t.id))]})]})}),v&&e.jsx("button",{onClick:()=>C(!1),className:"self-start p-2 bg-white rounded-lg shadow-lg hover:bg-gray-50 transition-colors",type:"button",title:"Expand sidebar",children:e.jsx(Q,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 ",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-red-300 border-l-4 border-l-red-500 p-6 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i==null?void 0:i.filter(t=>t.status==1).length})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(G,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-green-300 border-l-4 border-l-green-500 p-6 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i==null?void 0:i.filter(t=>t.status==2).length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(re,{className:"w-6 h-6 text-green-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-300 shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md ",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by team name or team leader name...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-0 focus:ring-orange-400 focus:border-orange-400 transition-colors",value:y,onChange:t=>R(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-gray-500"}),e.jsxs("select",{className:"border border-gray-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white",value:u,onChange:t=>T(t.target.value),children:[e.jsx("option",{value:"all",children:"All Logs"}),e.jsx("option",{value:"active",children:"Approved Only"}),e.jsx("option",{value:"ended",children:"Rejected Only"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-300 p-6 transition-all duration-300 hover:shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-500 flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pre Registration Logs"}),d&&e.jsxs("span",{className:"text-sm text-gray-600",children:["- ",((k=S.find(t=>t.id===d))==null?void 0:k.name)||""]})]}),e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gradient-to-r from-red-500 to-amber-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Team Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Team Leader"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Contact Number"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Reject / Approved Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"View"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Comment"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map((t,a)=>{var c,s,m,x;return e.jsxs("tr",{className:`hover:bg-red-50 transition-colors duration-200 ${a%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center w-fit truncate",children:e.jsx("div",{className:"max-w-[150px] px-3 truncate h-8 bg-gradient-to-r from-red-400 to-amber-400 rounded full flex items-center justify-center text-white font-semibold text-sm mr-3",children:((c=t.participant)==null?void 0:c.team)||"N/A"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center w-fit truncate",children:[e.jsx(Y,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-900 font-medium",children:((s=t.participant)==null?void 0:s.team_leader)||"N/A"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-gray-900 font-medium break-words",children:((m=t.participant)==null?void 0:m.team_leader_email)||"N/A"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 text-gray-400 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-gray-900 font-mono break-words",children:((x=t.participant)==null?void 0:x.contact_number)||"N/A"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-sm font-medium ${t.status===1?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t.status===1?"Rejected":"Approved"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center w-fit truncate",children:[e.jsx(Z,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-900 text-sm",children:I(t.created_at)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(H,{size:"sm",className:"bg-green-600 hover:bg-green-800 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",type:"button",disabled:!t.participant,onClick:()=>{if(!t.participant){f.fire({icon:"error",title:"Error",text:"Participant data not available",confirmButtonColor:"#16a34a"});return}let l=[];try{t.participant.members&&(l=JSON.parse(t.participant.members))}catch(r){console.error("Error parsing members data:",r),l=[]}console.log(JSON.stringify(l));const n=[{url:"/storage/"+t.participant.student_id,type:"image",name:`Valid Student ID (${t.participant.team_leader})`},{url:"/storage/"+t.participant.registration_form,type:"image",name:`Certificate of Registration Form (${t.participant.team_leader})`},{url:"/storage/"+t.participant.consent_form,type:"image",name:`Consent Form (${t.participant.team_leader})`}];l.forEach(r=>{n.push({url:"/storage/"+r.requirements.studentId,type:"image",name:`Valid Student ID (${r.name})`},{url:"/storage/"+r.requirements.registrationForm,type:"image",name:`Certificate of Registration Form (${r.name})`},{url:"/storage/"+r.requirements.consentForm,type:"image",name:`Consent Form (${r.name})`})}),z(t,n)},children:[e.jsx(ee,{className:"w-4 h-4 text-white"}),e.jsx("span",{children:"View"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-gray-900 text-sm  w-fit  truncate",children:t.comment})})]},t.id)})})]})}),i.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(w,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sessions found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or filters."})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:["Showing ",i.length," of ",d?i.length:L.length," sessions"]})})]})]})]})})})};export{Ce as default};
