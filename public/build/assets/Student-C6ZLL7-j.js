import{r as c,j as t,a as z}from"./app-DWT7hB3X.js";import{F as B}from"./Footer-D0BFCX_Q.js";import{S as g}from"./sweetalert2.esm.all-ePrzfkxH.js";import{E as I}from"./eye-off-aHFPs5S_.js";import{E as M}from"./eye-BZ9IrxpC.js";import"./createLucideIcon-Dpa32nA7.js";const R=T=>{const[l,h]=c.useState(0),[i,f]=c.useState({fullName:"",studentNumber:"",program:"",section:"",username:"",email:"",password:""}),[a,x]=c.useState(null),[N,p]=c.useState(!1),[b,S]=c.useState(!1),v=e=>{f({...i,[e.target.name]:e.target.value}),e.target.name==="password"&&p(!1)},P=e=>{if(!e)return{score:0,label:"",color:"",isStrong:!1,suggestions:[]};let s=0;const r=[];e.length>=8?s+=2:r.push("Use at least 8 characters"),e.length>=12?s+=1:e.length>=8&&r.push("Consider using 12+ characters for better security"),/[a-z]/.test(e)?s+=1:r.push("Include lowercase letters (a-z)"),/[A-Z]/.test(e)?s+=1:r.push("Include uppercase letters (A-Z)"),/[0-9]/.test(e)?s+=1:r.push("Include numbers (0-9)"),/[^a-zA-Z0-9]/.test(e)?s+=1:r.push("Include special characters (!@#$%^&*)"),/(.)\1{2,}/.test(e)?r.push("Avoid repeating the same character 3+ times"):s+=1,/123|abc|qwerty|password|admin|user/i.test(e)?r.push("Avoid common patterns and dictionary words"):s+=1;let o,n,d;return s<=3?(o="Very Weak",n="#dc2626",d=!1):s<=4?(o="Weak",n="#ea580c",d=!1):s<=6?(o="Fair",n="#d97706",d=!1):s<=7?(o="Good",n="#16a34a",d=!0):(o="Strong",n="#059669",d=!0),{score:s,label:o,color:n,isStrong:d,suggestions:r}};c.useEffect(()=>{if(i.password){const e=P(i.password);x(e)}else x(null)},[i.password]);const C=()=>{const e="abcdefghijklmnopqrstuvwxyz",s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="0123456789",o="!@#$%^&*";let n="";n+=e[Math.floor(Math.random()*e.length)],n+=s[Math.floor(Math.random()*s.length)],n+=r[Math.floor(Math.random()*r.length)],n+=o[Math.floor(Math.random()*o.length)];const d=e+s+r+o;for(let j=4;j<14;j++)n+=d[Math.floor(Math.random()*d.length)];return n.split("").sort(()=>Math.random()-.5).join("")},y=()=>{const e=C();g.fire({title:"Strong Password Suggestion",html:`
        <div style="text-align: left; margin: 20px 0;">
          <p style="margin-bottom: 15px;">Here's a strong password for you:</p>
          <div style="
            background: #f3f4f6; 
            padding: 12px; 
            border-radius: 8px; 
            font-family: monospace; 
            font-size: 16px; 
            font-weight: bold;
            word-break: break-all;
            border: 2px dashed #6b7280;
            margin-bottom: 15px;
          ">
            ${e}
          </div>
          <p style="font-size: 14px; color: #6b7280;">
            ðŸ’¡ This password meets all security requirements and will be accepted immediately.
          </p>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Use This Password",cancelButtonText:"Generate Another",showDenyButton:!0,denyButtonText:"Close",confirmButtonColor:"#16a34a",cancelButtonColor:"#6b7280",denyButtonColor:"#dc2626"}).then(s=>{s.isConfirmed?(f({...i,password:e}),p(!1)):s.dismiss===g.DismissReason.cancel&&y()})},m=(e,s)=>{g.fire({toast:!0,position:"top-end",icon:e,title:s,showConfirmButton:!1,timer:3e3,timerProgressBar:!0})},w=()=>{const e=u[l].fields,s=e.every(r=>i[r.name].trim()!=="");return l===1&&e.some(o=>o.name==="password")&&a?s&&a.isStrong:s},k=()=>{if(l===1&&i.password&&a&&!a.isStrong){p(!0),m("error","Please create a stronger password before proceeding");return}l<u.length-1?h(l+1):F()},F=async()=>{var e;if(a&&!a.isStrong){m("error","Please create a stronger password before registering");return}try{const s=await z.post("/register-student",i);m("success","Registration successful! Please login to continue."),setTimeout(()=>{window.location.href="/login"},2e3),console.log(s.data)}catch(s){if(s.response&&s.response.status===422){const r=s.response.data.errors,o=Object.values(r).flat().join(`
`);m("error",o)}else m("error","Registration failed. Please try again.");console.error(((e=s.response)==null?void 0:e.data)||s.message)}},u=[{fields:[{name:"fullName",label:"Full Name",type:"text",placeholder:"Last Name, First Name M.I"},{name:"studentNumber",label:"Student Number",type:"text",placeholder:"e.g., 2021-000000-TG-0"},{name:"program",label:"Program",type:"text",placeholder:"e.g., BS in Information Technology"},{name:"section",label:"Section",type:"text",placeholder:"e.g., BSIT 1-1"}]},{fields:[{name:"username",label:"Username",type:"text",placeholder:"Enter your preferred username"},{name:"email",label:"Email",type:"email",placeholder:"name@example.com"},{name:"password",label:"Password",type:"password",placeholder:"Use 12+ characters with symbols"}]}];return t.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[t.jsxs("div",{className:"max-w-md w-full px-6 py-8",children:[t.jsx("div",{className:"w-full h-2 rounded-full bg-transparent",children:t.jsx("div",{className:"h-full rounded-full",style:{backgroundColor:"#FF2C19",width:`${l/(u.length-1)*100}%`}})}),t.jsxs("div",{className:"bg-transparent rounded-lg p-8 shadow-lg",children:[t.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"Create an account"}),t.jsx("p",{className:"text-gray-600 text-center mb-8",children:"Please enter your details."}),t.jsxs("form",{className:"space-y-6",style:{zIndex:1e3},onSubmit:e=>e.preventDefault(),children:[u[l].fields.map(e=>t.jsxs("div",{className:"relative z-50",children:[t.jsx("label",{className:"block text-red-500 text-lg mb-1",htmlFor:e.name,children:e.label}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:e.type==="password"&&b?"text":e.type,id:e.name,name:e.name,value:i[e.name],onChange:v,className:"w-full border-0 border-b border-red-500 pb-2 text-lg focus:ring-0 focus:outline-none focus:border-b-2 bg-transparent pr-10",placeholder:e.placeholder??""}),e.name==="password"&&t.jsx("button",{type:"button",onClick:()=>S(s=>!s),className:"absolute right-0 top-1/2 -translate-y-1/2 text-gray-600 hover:text-gray-800 focus:outline-none",children:b?t.jsx(I,{size:20}):t.jsx(M,{size:20})})]}),e.name==="password"&&i.password&&a&&t.jsxs("div",{className:"mt-3",style:{zIndex:100},children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Password Strength:"}),t.jsx("span",{className:"text-sm font-bold",style:{color:a.color},children:a.label})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:t.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${a.score/9*100}%`,backgroundColor:a.color}})}),!a.isStrong&&N&&t.jsxs("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("p",{className:"text-red-700 text-sm font-medium mb-1",children:"âš ï¸ Password is too weak for registration"}),t.jsx("p",{className:"text-red-600 text-xs",children:"You must create a stronger password to continue."})]}),a.suggestions.length>0&&t.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg border",children:[t.jsx("p",{className:"text-gray-700 text-sm font-medium mb-2",children:a.isStrong?"âœ… Great password!":"ðŸ’¡ To make your password stronger:"}),!a.isStrong&&t.jsx("ul",{className:"space-y-1",children:a.suggestions.slice(0,4).map((s,r)=>t.jsxs("li",{className:"text-sm text-gray-600 flex items-start",children:[t.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full mr-2 mt-2 flex-shrink-0"}),s]},r))})]}),!a.isStrong&&t.jsx("button",{type:"button",onClick:y,style:{zIndex:100},className:"text-sm bg-green-100 text-green-700 hover:bg-green-200 px-3 py-2 rounded-lg transition-colors border border-green-200",children:"ðŸ” Generate Strong Password"})]})]},e.name)),t.jsxs("div",{className:"flex justify-between pt-8",children:[l>0&&t.jsx("button",{type:"button",onClick:()=>h(l-1),style:{zIndex:100},className:"text-gray-600 hover:text-gray-800",children:"Previous"}),t.jsx("button",{type:"button",style:{zIndex:100},onClick:k,disabled:!w(),className:`ml-auto px-8 py-3 rounded-full transition-colors ${w()?"bg-red-500 text-white hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l===u.length-1?"Sign Up":"Continue"})]})]})]})]}),t.jsx(B,{})]})};export{R as default};
