import{q as E,r,j as e,B as J,W as d}from"./app-DfPUS0g-.js";import{A as P}from"./AuthenticatedLayout-DP1sGqdd.js";import"./sweetalert2.esm.all-ePrzfkxH.js";/* empty css                        */import{C as L}from"./circle-plus-CFc3wl_6.js";import{C as $}from"./code-DXCG_BwG.js";import{F as v}from"./file-text-_j9MSA1-.js";import{C as p}from"./clock-CAzn1UTl.js";import{S as w}from"./star-C0jwK31X.js";import{C as Q}from"./circle-play-C3WMkz4H.js";import"./transition-CdeAVsF6.js";import"./render-TPd2KTBo.js";import"./createLucideIcon-BW7jgRi7.js";function V(){const{auth:C}=E().props;C.user;const[o,S]=r.useState([]),[f,c]=r.useState([]),[i,m]=r.useState("published"),[x,j]=r.useState(!0),[h,u]=r.useState(!0),[l,b]=r.useState(null),[n,z]=r.useState(null),[A,D]=r.useState("");r.useEffect(()=>{(async()=>{j(!0),b(null);try{const t=await fetch("/quizzes/my");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();S(a)}catch(t){console.error("Failed to fetch quizzes created by user:",t),b("Failed to load your quizzes. Please try again.")}finally{j(!1)}})()},[]),r.useEffect(()=>{(async()=>{u(!0),z(null);try{const t=await fetch("/quizzes/myj");if(!t.ok){if(t.status>=500)throw new Error(`Server error: ${t.status}`);if(t.status===404||t.status===401){c([]),u(!1);return}throw new Error(`HTTP error! status: ${t.status}`)}const a=await t.json();c(Array.isArray(a)?a:[])}catch(t){console.error("Failed to fetch joined quizzes:",t),t.message&&!t.message.includes("404")&&!t.message.includes("401")?z("Failed to load joined quizzes. Please try again."):c([])}finally{u(!1)}})()},[]);const y=o.filter(s=>i==="published"?s.status==="published":i==="drafts"?s.status==="draft":i==="archive"?s.status==="archived":!1),k=o.filter(s=>s.status==="published").length,M=o.filter(s=>s.status==="draft").length,T=o.filter(s=>s.status==="archived").length,N=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(P,{children:[e.jsx(J,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-8",children:"My Quizzes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Created by me"}),e.jsx("hr",{className:"border-black mb-4"}),e.jsxs(d,{href:"/createquiz",className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-900 focus:outline-none focus:border-red-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150 mb-4",children:[e.jsx(L,{size:18,className:"mr-2"})," Create New Quiz"]}),x&&e.jsx("p",{className:"text-gray-600",children:"Loading your quizzes..."}),l&&e.jsx("p",{className:"text-red-500",children:l}),!x&&!l&&y.length===0&&e.jsx("p",{className:"text-gray-500",children:"No quizzes found in this category."}),e.jsx("div",{className:"space-y-4",children:!x&&!l&&y.map(s=>{var t;return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 flex items-start gap-4 shadow-sm",children:[e.jsx("img",{src:(t=s.questions[0])!=null&&t.image_path?`/storage/${s.questions[0].image_path}`:"https://placehold.co/96x96/e0e0e0/333333?text=Quiz",alt:"Quiz Thumbnail",className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-600 text-lg font-semibold",children:s.title}),s.code&&e.jsxs("p",{className:"text-sm text-gray-700 mt-1 flex items-center gap-2 font-medium",children:[e.jsx($,{size:16})," Quiz Code: ",s.code]}),e.jsxs("p",{className:"text-sm text-gray-700 mt-1 flex items-center gap-2",children:[e.jsx(v,{size:16})," ",s.questions.length," Questions"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(p,{size:16})," Created: ",N(s.created_at)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(w,{size:16})," Total Points: ",s.questions.reduce((a,g)=>a+(g.points||0),0)]}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsxs(d,{href:route("quizzes.starting",s.id),className:"text-blue-600 hover:underline text-sm flex items-center",children:[e.jsx(Q,{size:16,className:"mr-1"})," Start"]})}),e.jsxs(d,{href:route("quizzes.edit",s.id),className:"text-green-600 hover:underline text-sm flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4Z"})]}),"Edit"]})]})]},s.id)})})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Quiz Status"}),e.jsxs("div",{className:"flex justify-between text-sm font-semibold mb-2 border-b pb-2",children:[e.jsxs("button",{onClick:()=>m("published"),className:`px-3 py-1 rounded-md transition-colors ${i==="published"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:["Published (",k,")"]}),e.jsxs("button",{onClick:()=>m("drafts"),className:`px-3 py-1 rounded-md transition-colors ${i==="drafts"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:["Drafts (",M,")"]}),e.jsxs("button",{onClick:()=>m("archive"),className:`px-3 py-1 rounded-md transition-colors ${i==="archive"?"bg-red-100 text-red-700":"text-gray-600 hover:bg-gray-100"}`,children:["Archive (",T,")"]})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-4",children:'Quizzes filtered by status are shown in the "Created by me" section. Click on a tab to see quizzes of that status.'})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Joined Quizzes"}),e.jsx("hr",{className:"border-black mb-4"}),h&&e.jsx("p",{className:"text-gray-600",children:"Loading joined quizzes..."}),n&&e.jsx("p",{className:"text-red-500",children:n}),!h&&!n&&f.length===0&&e.jsx("p",{className:"text-gray-500",children:"No joined quizzes to display yet."}),e.jsx("div",{className:"space-y-4",children:!h&&!n&&f.map(s=>{var t;return e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 flex items-start gap-4 shadow-sm",children:[e.jsx("img",{src:(t=s.questions[0])!=null&&t.image_path?`/storage/${s.questions[0].image_path}`:"https://placehold.co/96x96/e0e0e0/333333?text=Quiz",alt:"Quiz Thumbnail",className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-600 text-lg font-semibold",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-700 mt-1 flex items-center gap-2",children:[e.jsx(v,{size:16})," ",s.questions.length," Questions"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(p,{size:16})," Created: ",N(s.created_at)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(w,{size:16})," Total Points: ",s.questions.reduce((a,g)=>a+(g.points||0),0)]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-2",children:[e.jsx(p,{size:16})," Status: ",s.statusquiz]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsxs(d,{href:route("quizzes.starting",s.id),className:"text-blue-600 hover:underline text-sm flex items-center",children:[e.jsx(Q,{size:16,className:"mr-1"})," Start"]})})})]})]},s.id)})})]})]})]})]})})})]})}export{V as default};
