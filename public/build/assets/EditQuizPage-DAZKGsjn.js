import{P as k,j as e,B as Q}from"./app-DWT7hB3X.js";import{A as _}from"./AuthenticatedLayout-oP7-p8OQ.js";import{C as A}from"./circle-plus-CD_0DYvf.js";import{S as T}from"./save-X0ZkYVow.js";import"./transition-D2D_kb1X.js";import"./render-DRiD-TBL.js";import"./createLucideIcon-Dpa32nA7.js";function D({quiz:l,status:m,error:u}){const{data:n,setData:r,post:h,processing:x,errors:d,transform:p}=k({title:l.title,questions:l.questions.map(t=>{var s;return{id:t.id,type:t.type,questionText:t.question_text,timeLimit:t.time_limit,points:t.points,difficulty:t.difficulty,image:t.image_path,options:((s=t.options)==null?void 0:s.map(i=>({id:i.id,text:i.option_text,isCorrect:i.is_correct})))||[],trueFalseAnswer:t.true_false_answer,shortAnswer:t.short_answer}})});p(t=>({...t,questions:t.questions.map(s=>{var i;return{...s,question_text:s.questionText,options:(i=s.options)==null?void 0:i.map(o=>({...o,option_text:o.text,is_correct:o.isCorrect}))}})}));const g=t=>{t.preventDefault(),h(`/quizzes/${l.id}`,{onSuccess:()=>{alert("Quiz updated successfully!")},onError:s=>{console.error("Form submission errors:",s)},method:"put"})},b=t=>{r("title",t.target.value)},a=(t,s,i)=>{const o=[...n.questions];o[t][s]=i,r("questions",o)},f=(t,s,i)=>{const o=[...n.questions];o[t].options&&(o[t].options[s].text=i,r("questions",o))},j=(t,s,i)=>{const o=[...n.questions];o[t].options&&(o[t].options=o[t].options.map((c,C)=>({...c,isCorrect:C===s?i:!1})),r("questions",o))},y=t=>{const s=[...n.questions];s[t].options&&(s[t].options.push({text:"",isCorrect:!1}),r("questions",s))},v=(t,s)=>{const i=[...n.questions];i[t].options&&(i[t].options.splice(s,1),r("questions",i))},w=()=>{r("questions",[...n.questions,{type:"multiple-choice",questionText:"",timeLimit:null,points:null,difficulty:"easy",image_path:void 0,options:[{id:Date.now(),option_text:"",is_correct:!1}],true_false_answer:null,short_answer:""}])},N=t=>{const s=[...n.questions];s.splice(t,1),r("questions",s)};return e.jsxs(_,{header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Edit Quiz: ",l.title]}),children:[e.jsx(Q,{title:`Edit Quiz: ${l.title}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[m&&e.jsx("div",{className:"mb-4 font-medium text-sm text-green-600",children:m}),u&&e.jsx("div",{className:"mb-4 font-medium text-sm text-red-600",children:u}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Quiz Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",required:!0}),d.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:d.title})]}),e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Questions"}),n.questions.length===0&&e.jsx("p",{className:"mb-4",children:"No questions yet. Add one!"}),n.questions.map((t,s)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md mb-4 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h4",{className:"font-semibold",children:["Question ",s+1]}),e.jsx("button",{type:"button",onClick:()=>N(s),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove Question"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Question Text"}),e.jsx("input",{type:"text",value:t.questionText,onChange:i=>a(s,"questionText",i.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}),d[`questions.${s}.questionText`]&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:d[`questions.${s}.questionText`]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Question Type"}),e.jsxs("select",{value:t.type,onChange:i=>a(s,"type",i.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[e.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),e.jsx("option",{value:"true-false",children:"True/False"}),e.jsx("option",{value:"short-answer",children:"Short Answer"})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Difficulty Level"}),e.jsxs("select",{value:t.difficulty,onChange:i=>a(s,"difficulty",i.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"average",children:"Average"}),e.jsx("option",{value:"hard",children:"Hard"})]})]}),t.type==="multiple-choice"&&t.options&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options"}),t.options.map((i,o)=>e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("input",{type:"text",value:i.text,onChange:c=>f(s,o,c.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm text-sm"}),e.jsx("input",{type:"checkbox",checked:i.isCorrect,onChange:c=>j(s,o,c.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Correct"}),e.jsx("button",{type:"button",onClick:()=>v(s,o),className:"text-red-500 hover:text-red-700 text-sm",children:"X"})]},i.id||o)),e.jsx("button",{type:"button",onClick:()=>y(s),className:"mt-2 inline-flex items-center px-3 py-1 bg-gray-200 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-300",children:"Add Option"})]}),t.type==="true-false"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answer"}),e.jsxs("select",{value:String(t.trueFalseAnswer),onChange:i=>a(s,"trueFalseAnswer",i.target.value==="true"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[e.jsx("option",{value:"true",children:"True"}),e.jsx("option",{value:"false",children:"False"})]})]}),t.type==="short-answer"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answer"}),e.jsx("input",{type:"text",value:t.shortAnswer||"",onChange:i=>a(s,"shortAnswer",i.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Limit (seconds)"}),e.jsx("input",{type:"number",value:t.timeLimit||"",onChange:i=>a(s,"timeLimit",parseInt(i.target.value)||null),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Points"}),e.jsx("input",{type:"number",value:t.points||"",onChange:i=>a(s,"points",parseInt(i.target.value)||null),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]})]},t.id||s)),e.jsxs("button",{type:"button",onClick:w,className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150 mb-6",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Add Question"]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150",disabled:x,children:[e.jsx(T,{className:"mr-2 h-4 w-4"})," ",x?"Updating...":"Update Quiz"]})})]})]})})})]})}export{D as default};
