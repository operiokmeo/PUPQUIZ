import{q as b,r as N,j as e,b as y}from"./app-DfPUS0g-.js";import{A as I}from"./AuthenticatedLayout-DP1sGqdd.js";import{L as U}from"./layout-dashboard-CJdz84ez.js";import{U as h}from"./user-D7jZvcVM.js";import{C as v}from"./clock-CAzn1UTl.js";import{c as E}from"./createLucideIcon-BW7jgRi7.js";import{S as w}from"./search-B22_l6qK.js";import{F as L}from"./funnel-RwBh1FFU.js";import{C as M}from"./calendar-CzMX3JMQ.js";import"./transition-CdeAVsF6.js";import"./render-TPd2KTBo.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],S=E("map-pin",k),K=T=>{var g;const{logs:p}=b().props,{auth:t}=b().props,[o,_]=N.useState(""),[i,A]=N.useState("all"),a=Array.isArray(p)?p:[],u=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Active Session",D=(s,r)=>{if(!r)return"Active";const m=new Date(s),l=new Date(r),d=Math.abs(l-m),n=Math.floor(d/6e4),c=Math.floor(d%6e4/1e3);return`${n}m ${c}s`},C=s=>s?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 border border-gray-200",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),"Ended"]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),"Active"]}),x=a.filter(s=>{var d,n,c,f,j;if(!s||!s.id||((d=t==null?void 0:t.user)==null?void 0:d.role)===2&&s.user_id!==((n=t==null?void 0:t.user)==null?void 0:n.id)||((c=t==null?void 0:t.user)==null?void 0:c.role)===1&&s.user_id!==((f=t==null?void 0:t.user)==null?void 0:f.id))return!1;const r=((j=s.id)==null?void 0:j.toString())||"",m=s.ip_address||"",l=r.includes(o)||m.includes(o);return i==="all"?l:i==="active"?l&&!s.logout_timestamp:i==="ended"?l&&s.logout_timestamp:l});return e.jsx(I,{children:e.jsx("div",{className:"min-h-screen bg-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2 bg-gradient-to-r from-red-600 to-amber-600 bg-clip-text text-transparent",children:"Session Logs"}),e.jsx("p",{className:"text-gray-600",children:"Monitor and track user session activity"})]}),e.jsxs("button",{onClick:s=>{var r;s.preventDefault(),s.stopPropagation(),((r=t==null?void 0:t.user)==null?void 0:r.role)===3?y.get("/organizerLobby"):y.get("/dashboard")},className:"bg-red-500 text-white p-4 flex gap-x-3 rounded-md hover:bg-red-700 hover:cursor-pointer",type:"button",children:[e.jsx(U,{}),e.jsx("p",{children:"Go to Dashboard"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border-l-4 border-red-500 p-6 hover:shadow-xl transition-shadow duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(h,{className:"w-6 h-6 text-red-600"})})]})}),((g=t==null?void 0:t.user)==null?void 0:g.role)===3&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border-l-4 border-green-500 p-6 hover:shadow-xl transition-shadow duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(s=>!s.logout_timestamp).length})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(v,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border-l-4 border-amber-500 p-6 hover:shadow-xl transition-shadow duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unique Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:new Set(a.map(s=>s.user_id)).size})]}),e.jsx("div",{className:"p-3 bg-amber-100 rounded-full",children:e.jsx(h,{className:"w-6 h-6 text-amber-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border-l-4 border-red-500 p-6 hover:shadow-xl transition-shadow duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ended Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(s=>s.logout_timestamp).length})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(S,{className:"w-6 h-6 text-red-600"})})]})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by ID or IP address...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-colors",value:o,onChange:s=>_(s.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-gray-500"}),e.jsxs("select",{className:"border border-gray-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white",value:i,onChange:s=>A(s.target.value),children:[e.jsx("option",{value:"all",children:"All Sessions"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"ended",children:"Ended Only"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-red-500 to-amber-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Session ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"IP Address"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Started"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Ended"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white",children:"Duration"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map((s,r)=>e.jsxs("tr",{className:`hover:bg-red-50 transition-colors duration-200 ${r%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-red-400 to-amber-400 rounded-full flex items-center justify-center text-white font-semibold text-sm mr-3",children:s.id}),e.jsxs("span",{className:"font-medium text-gray-900",children:["#",s.id]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-900 font-medium",children:s.user_name||`User ID: ${s.user_id||"N/A"}`})]})}),e.jsx("td",{className:"px-6 py-4",children:C(s.logout_timestamp)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-900 font-mono",children:s.ip_address})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-900 text-sm",children:u(s.created_at)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-900 text-sm",children:u(s.logout_timestamp)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-sm font-medium ${s.logout_timestamp?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"}`,children:D(s.created_at,s.logout_timestamp)})})]},s.id))})]})}),x.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(w,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sessions found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or filters."})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:["Showing ",x.length," of ",a.length," sessions"]})})]})})})};export{K as default};
